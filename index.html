<!doctype html>

<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>é»˜çº¤ç‰¹åŒºæ”¿åºœ â€¢ Moxan S.A. Gov.</title>
  <!--
    å•æ–‡ä»¶ç½‘ç«™ï¼ˆå¯æŒ‰éœ€æ‹†åˆ†ä¸º index.html, styles.css, scripts.jsï¼‰
    è¯´æ˜ï¼šè¿™æ˜¯åœ¨ä½ åŸå§‹æ–‡ä»¶ä¸Šåšçš„æœ€å°ä¿®æ”¹ç‰ˆï¼Œåªå¢åŠ äº†å¿…è¦çš„æ ·å¼ä¸äº‹ä»¶ç»‘å®šï¼Œ**æœªç§»é™¤ä»»ä½•ç°æœ‰å…ƒç´ **ã€‚
  -->
  <style>
    :root{
      --bg:#081221;
      --glass: rgba(255,255,255,0.06);
      --accent:#6EE7B7;
      --accent-2:#7dd3fc;
      --text:#e6f0f6;
      --muted:rgba(230,240,246,0.7);
      --card-shadow: 0 8px 24px rgba(2,6,23,0.6);
      --glass-border: rgba(255,255,255,0.08);
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; background:linear-gradient(180deg,#041026 0%, #071426 60%);color:var(--text);}
    a{color:inherit;text-decoration:none}/* Top hero */
.hero{
  position:relative;min-height:55vh;display:grid;place-items:center;overflow:hidden;
}
.hero .bg{
  position:absolute;inset:0;background-size:cover;background-position:center center;filter:brightness(.55) saturate(.9) contrast(.95);transform:scale(1.03);transition:transform .9s ease;}
.hero .overlay{position:absolute;inset:0;background:linear-gradient(180deg, rgba(4,8,20,0.2), rgba(2,6,23,0.6));}
.hero .title-card{position:relative;z-index:2;text-align:center;padding:3rem 1rem;border-radius:16px;backdrop-filter: blur(6px) saturate(120%);background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));border:1px solid var(--glass-border);box-shadow:var(--card-shadow);max-width:1100px;width:100%;}
.hero h1{font-size:clamp(1.6rem,4vw,3.2rem);margin:.1rem 0 0.4rem;font-weight:700;letter-spacing:0.6px}
.hero p.lead{margin:0 0 1rem;color:var(--muted)}
.hero .controls{display:flex;gap:.6rem;justify-content:center;flex-wrap:wrap}
.btn{display:inline-flex;align-items:center;gap:.6rem;padding:.6rem 1rem;border-radius:12px;background:var(--glass);border:1px solid var(--glass-border);cursor:pointer;font-weight:600}
.btn.accent{background:linear-gradient(90deg,var(--accent),var(--accent-2));color:#052225;border:none}/* scrolling section layout */ main{max-width:1200px;margin:-4rem auto 4rem;padding:0 1rem;} .section{margin:3.5rem 0} .grid{display:grid;gap:1rem}

/* two-column layout */ .cols-3{grid-template-columns: 1fr 360px;align-items:start} @media (max-width:980px){.cols-3{grid-template-columns:1fr}}

/* glass card */ .card{background:var(--glass);border:1px solid var(--glass-border);border-radius:14px;padding:1rem;box-shadow:var(--card-shadow);}

/* member list vertical */ .members{display:flex;flex-direction:column;gap:.8rem} .member{display:flex;gap:.8rem;align-items:center} .member .avatar{width:76px;height:76px;border-radius:10px;flex:0 0 76px;background:linear-gradient(180deg,rgba(255,255,255,0.03),transparent);display:grid;place-items:center;border:1px solid rgba(255,255,255,0.04);overflow:hidden} .member .avatar img{width:100%;height:100%;object-fit:cover} .member .meta{flex:1} .member .meta h4{margin:0;font-size:1rem} .member .meta p{margin:2px 0 0;color:var(--muted);font-size:.9rem}

/* maps gallery with different ratios / .maps{display:flex;gap:10px;flex-wrap:wrap;align-items:stretch} .maps .map{flex:1 1 220px;border-radius:12px;overflow:hidden;min-height:140px;position:relative} .maps .map.ratio-16-9{aspect-ratio:16/9} .maps .map.ratio-4-3{aspect-ratio:4/3} .maps .map.ratio-3-4{aspect-ratio:3/4} .maps .map img{width:100%;height:100%;object-fit:cover;display:block;} .maps .map .caption{position:absolute;left:8px;bottom:8px;padding:.4rem .6rem;border-radius:8px;background:rgba(0,0,0,0.35);backdrop-filter:blur(4px);font-size:.85rem} / æç¤ºï¼šè®©åœ°å›¾å¯ç‚¹ï¼ŒæŒ‡é’ˆæ˜¾ç¤ºç¼©æ”¾æ‰‹åŠ¿ */ .maps .map{cursor:zoom-in}

/* gallery grid */ .gallery-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(180px,1fr));gap:10px} .gallery-item{border-radius:10px;overflow:hidden;position:relative;min-height:120px} .gallery-item img{width:100%;height:100%;object-fit:cover} .gallery-item .g-caption{position:absolute;left:6px;bottom:6px;background:linear-gradient(90deg,rgba(0,0,0,.45),transparent);padding:.3rem .5rem;border-radius:8px;font-size:.82rem}

/* comment list */ .comments{display:flex;flex-direction:column;gap:.6rem} .comment{padding:.6rem;border-radius:10px;background:linear-gradient(180deg,rgba(255,255,255,0.02),transparent);border:1px solid rgba(255,255,255,0.03)}

/* small utilities */ .meta-row{display:flex;gap:.6rem;align-items:center;flex-wrap:wrap} .muted{color:var(--muted)}

/* animations */ .float-up{transform:translateY(8px);opacity:0;animation:floatUp .9s cubic-bezier(.2,.9,.26,1) forwards} @keyframes floatUp{to{transform:none;opacity:1}} .pulse{animation:pulseGlow 2.6s infinite} @keyframes pulseGlow{0%{box-shadow:0 0 0 0 rgba(110,231,183,0.0)}50%{box-shadow:0 0 30px 6px rgba(110,231,183,0.06)}100%{box-shadow:0 0 0 0 rgba(110,231,183,0.0)}}

/* tiny footer */ footer{padding:1.2rem 0;text-align:center;color:var(--muted);font-size:.9rem}

/* language & theme toggles */ .toggles{display:flex;gap:.5rem;align-items:center} .chip{padding:.35rem .6rem;border-radius:999px;border:1px solid var(--glass-border);background:transparent;font-weight:600;cursor:pointer}

/* responsive tweaks */ @media (max-width:640px){.hero .title-card{padding:1.6rem}.cols-3{grid-template-columns:1fr}}

  </style>
</head>
<body>
  <header class="hero">
    <div class="bg" id="heroBg" style="background-image:url('assets/hero-bg.jpg');">
      <!-- REPLACE: assets/hero-bg.jpg -->
    </div>
    <div class="overlay"></div>
    <div class="title-card float-up" role="banner">
      <h1 data-i18n="title">é»˜çº¤ç‰¹åŒºæ”¿åºœ <span style="font-weight:400">â€¢ Moxan S.A. Gov.</span></h1>
      <p class="lead" data-i18n="subtitle">ä¸€ä¸ªç”±ç©å®¶åˆ›å»ºçš„è™šæ„ç‰¹åŒº â€” å¨±ä¹ä¸åˆ›é€ çš„è‡ªç”±å¤©åœ°ã€‚</p>
      <div class="controls">
        <button class="btn accent" id="anthemBtn" title="æ’­æ”¾å›½æ­Œ" aria-pressed="false">ğŸµ <span data-i18n="play_anthem">æ’­æ”¾å›½æ­Œ / Play Anthem</span></button>
        <a class="btn" href="#maps" data-i18n="view_maps">æŸ¥çœ‹è¡Œæ”¿ç–†åŸŸ / Maps</a>
        <div class="toggles">
          <button class="chip" id="langToggle">ä¸­æ–‡ / EN</button>
          <button class="chip" id="themeToggle">ä¸»é¢˜</button>
        </div>
        <button class="btn" id="joinQqBtn">åŠ å…¥åŒºå§”QQç¾¤</button>
      </div>
    </div>
  </header>  <main>
    <section class="section cols-3 grid">
      <div>
        <div class="card" style="margin-bottom:1rem">
          <h3 data-i18n="about_title">å…³äºé»˜çº¤ç‰¹åŒº</h3>
          <p data-i18n="about_text">é»˜çº¤ç‰¹åŒºï¼ˆMoxan S.A. Gov.ï¼‰æ˜¯ç”±Momo Traceå‘èµ·çš„Minecraftä¼ºæœå™¨è‡ªæ²»ç»„ç»‡ã€‚</p>
          <div class="meta-row" style="margin-top:8px">
            <span class="muted">æˆç«‹ï¼š2025</span>
            <span class="muted">â€¢</span>
            <span class="muted" data-i18n="members">æˆå‘˜ï¼šè‹¥å¹² ç©å®¶</span>
          </div>
        </div><div class="card" id="maps" style="margin-bottom:1rem">
      <h3 data-i18n="maps_title">è¡Œæ”¿ç–†åŸŸåœ°å›¾ / Administrative Maps</h3>
      <p class="muted" style="margin:6px 0">ä¸‹æ–¹å±•ç¤ºäº†å‡ å¼ ä¸åŒæ¯”ä¾‹çš„è¡Œæ”¿ç–†åŸŸç¤ºæ„å›¾</p>
      <div class="maps" id="mapsContainer">
        <div class="map ratio-16-9 card">
          <img src="assets/map-big.jpg" alt="Map wide" />
          <div class="caption">æ€»è§ˆåœ°å›¾ / Overview</div>
        </div>
        <div class="map ratio-4-3 card">
          <img src="assets/map-medium.jpg" alt="Map medium" />
          <div class="caption">ä¸­å¿ƒéƒ¨åˆ† / Districts</div>
        </div>
        <div class="map ratio-3-4 card">
          <img src="assets/map-city.jpg" alt="Map tall" />
          <div class="caption">ä¸»åŸéƒ¨åˆ† / Center</div>
        </div>
      </div>
      <!-- REPLACE: assets/map-wide.jpg, assets/map-medium.jpg, assets/map-tall.jpg -->
    </div><div class="card">
  <h3 data-i18n="gallery_title">é£æ™¯å›¾åº“ / Gallery</h3>
  <p class="muted">ç‚¹å‡»ä»»ä¸€å›¾ç‰‡æŸ¥çœ‹å¤§å›¾ä¸æè¿°ã€‚å›¾åº“æ¨¡å—åŒ–ï¼Œä¾¿äºæ‰©å±•ã€‚</p>
  <div class="gallery-grid" id="gallery">
    <!-- æ¨¡æ¿é¡¹ï¼šå¤åˆ¶ .gallery-item å¹¶æ›¿æ¢å›¾ç‰‡ä¸æ•°æ® -->
    <div class="gallery-item card" data-caption-cn="ä¸œæ¸¯ç¯å¡”" data-caption-en="East Harbor Lighthouse">
      <img src="assets/gallery-1.jpg" alt="East Harbor Lighthouse" />
      <div class="g-caption" data-i18n="gallery_item_1">ä¸œæ¸¯ç¯å¡” / East Harbor Lighthouse</div>
    </div>
    <div class="gallery-item card" data-caption-cn="æš®è‰²æ—åœ°" data-caption-en="Duskwood Forest">
      <img src="assets/gallery-2.jpg" alt="Duskwood Forest" />
      <div class="g-caption">æš®è‰²æ—åœ° / Duskwood Forest</div>
    </div>
    <div class="gallery-item card" data-caption-cn="ç©ºä¸­åº­é™¢" data-caption-en="Skyward Courtyard">
      <img src="assets/gallery-3.jpg" alt="Skyward Courtyard" />
      <div class="g-caption">ç©ºä¸­åº­é™¢ / Skyward Courtyard</div>
    </div>
    <!-- REPLACE gallery images with your own. -->
  </div>
</div>

  </div>  <aside>
    <div class="card">
      <h3 data-i18n="committee_title">ç‰¹åŒºåŒºå§” & å§”å‘˜</h3>
      <p class="muted">ç«–å‘å§”å‘˜åˆ—è¡¨ï¼ˆå ä½ç…§ç‰‡ï¼Œç«–å›¾ï¼‰</p>
      <div class="members" id="membersList">
        <div class="member">
          <div class="avatar"><img src="assets/momo.png" alt="Momo Trace"/></div>
          <div class="meta"><h4>Momo Trace</h4><p class="muted">ç‰¹åŒºä¸»å¸­ â€¢ Chairman</p></div>
        </div>
        <div class="member">
          <div class="avatar"><img src="assets/nasia.png" alt="Nasia"/></div>
          <div class="meta"><h4>Nasia</h4><p class="muted">å§”å‘˜</p></div>
        </div>
        <div class="member">
          <div class="avatar"><img src="assets/fille.png" alt="Fille_Qer"/></div>
          <div class="meta"><h4>Fille_Qer</h4><p class="muted">å§”å‘˜</p></div>
        </div>
        <div class="member">
          <div class="avatar"><img src="assets/boat.png" alt="boat"/></div>
          <div class="meta"><h4>boat</h4><p class="muted">å§”å‘˜</p></div>
        </div>
        <!-- REPLACE avatars in assets/members/ with your own vertical photos. -->
      </div>
      <div style="margin-top:10px" class="meta-row">
        <button class="btn" id="joinQqSide">åŠ å…¥QQç¾¤</button>
        <a class="btn" href="#" id="downloadMap">ä¸‹è½½è¡Œæ”¿æ€»è§ˆ</a>
      </div>
    </div><div class="card" style="margin-top:1rem">
  <h4 data-i18n="quick_links">å¿«é€Ÿé“¾æ¥</h4>
  <ul class="muted" style="padding-left:1rem;margin:8px 0">
    <li>å†…åŠ¡éƒ¨é¢‘é“</li>
    <li>å¸‚å®¹è®¾è®¡è®ºå›</li>
    <li>å…¬å…±å·¥ç¨‹ææ¡ˆ</li>
  </ul>
</div>

  </aside>
</section><section class="section">
  <div class="card">
    <h3 data-i18n="comments_title">ç‰¹åŒºä»‹ç»ä¸ç•™è¨€ / Testimonials</h3>
    <div style="display:flex;gap:1rem;flex-wrap:wrap;margin-top:8px">
      <div style="flex:1 1 320px">
        <div class="comment"><strong>ç©å®¶A</strong>ï¼šè¿™ä¸ªç‰¹åŒºçš„å¸‚æ”¿å…å»ºç­‘å¤ªæœ‰é£æ ¼äº†ï¼</div>
        <div class="comment"><strong>ç©å®¶B</strong>ï¼šçˆ±ä¸Šäº†è¿™é‡Œçš„ç©ºä¸­åº­é™¢ã€‚</div>
      </div>
      <div style="flex:1 1 320px">
        <div class="comment"><strong>ç©å®¶C</strong>ï¼šåŒºå§”æ´»åŠ¨å¾ˆæœ‰è¶£ã€‚</div>
        <div class="comment"><strong>ç©å®¶D</strong>ï¼šæœŸå¾…æ›´å¤šèŠ‚æ—¥æ´»åŠ¨ä¸è§‚å…‰å›¢ã€‚</div>
      </div>
    </div>
  </div>
</section><section class="section">
  <div class="card">
    <h3 data-i18n="anthem_title">å›½æ­Œ / Anthem</h3>
    <p class="muted">ç‚¹å‡»é¡¶éƒ¨â€œæ’­æ”¾å›½æ­Œ / Play Anthemâ€æŒ‰é’®ä»¥æ’­æ”¾ã€‚</p>
    <audio id="anthemAudio" src="assets/riseup.mp3" preload="none"></audio>
    <!-- REPLACE: assets/anthem.mp3 -->
  </div>
</section>  </main>  <footer>
    é»˜çº¤ç§‘æŠ€ Â©2025 â€¢ All rights reserved.
  </footer>  <!-- Modular scripts: å¯æŠ½ç¦»ä¸º scripts.js -->  <script>
    // Basic i18n dictionary (extendable)
    const i18n = {
      cn: {
        title: 'é»˜çº¤ç‰¹åŒºæ”¿åºœ â€¢ Moxan S.A. Gov.',
        subtitle: 'ä¸€ä¸ªç”±ç©å®¶åˆ›å»ºçš„è™šæ„ç‰¹åŒº â€” å¨±ä¹ä¸åˆ›é€ çš„è‡ªç”±å¤©åœ°ã€‚',
        play_anthem: 'æ’­æ”¾å›½æ­Œ / Play Anthem',
        pause_anthem: 'æš‚åœå›½æ­Œ / Pause Anthem',
        view_maps: 'æŸ¥çœ‹è¡Œæ”¿ç–†åŸŸ / Maps',
        about_title: 'å…³äºé»˜çº¤ç‰¹åŒº',
        about_text: 'é»˜çº¤ç‰¹åŒºï¼ˆMoxan S.A. Gov.ï¼‰æ˜¯ç”±ä¸€ç¾¤çƒ­çˆ±å»ºç­‘ã€æ”¿æ²»æˆå‰§ä¸ç¤¾åŒºæ´»åŠ¨çš„ç©å®¶åœ¨ Minecraft æœåŠ¡å™¨ä¸­å…±åŒåˆ›å»ºçš„å¨±ä¹ç‰¹åŒºã€‚è¿™é‡Œæœ‰å…¬å…±é¡¹ç›®ã€æ¨¡æ‹Ÿè¡Œæ”¿ã€ä»¥åŠé¢å‘å…¨æœçš„æ´»åŠ¨ã€‚ç½‘ç«™é£æ ¼åè‰ºæœ¯åŒ–ä¸äº’åŠ¨ä¸ºä¸»ï¼ŒéçœŸå®æ”¿åºœæœºæ„ã€‚',
        members: 'æˆå‘˜ï¼šè‹¥å¹² ç©å®¶',
        maps_title: 'è¡Œæ”¿ç–†åŸŸåœ°å›¾ / Administrative Maps',
        gallery_title: 'é£æ™¯å›¾åº“ / Gallery',
        committee_title: 'ç‰¹åŒºåŒºå§” & å§”å‘˜',
        quick_links: 'å¿«é€Ÿé“¾æ¥',
        comments_title: 'ç‰¹åŒºä»‹ç»ä¸ç•™è¨€ / Testimonials',
        anthem_title: 'å›½æ­Œ / Anthem',
        gallery_item_1: 'ä¸œæ¸¯ç¯å¡” / East Harbor Lighthouse'
      },
      en: {
        title: 'Moxan S.A. Gov. â€¢ é»˜çº¤ç‰¹åŒºæ”¿åºœ',
        subtitle: 'A player-made fictional special administrative region â€” a playground for creativity and entertainment.',
        play_anthem: 'Play Anthem / æ’­æ”¾å›½æ­Œ',
        pause_anthem: 'Pause Anthem / æš‚åœå›½æ­Œ',
        view_maps: 'View Administrative Maps / æŸ¥çœ‹åœ°å›¾',
        about_title: 'About Moxan S.A. Gov.',
        about_text: 'Moxan S.A. Gov. is a player-created fictional SAR within a Minecraft server, focusing on community projects, simulated governance, and public events. This site is for entertainment purposes.',
        members: 'Members: Several players',
        maps_title: 'Administrative Maps',
        gallery_title: 'Gallery',
        committee_title: 'Committee & Members',
        quick_links: 'Quick Links',
        comments_title: 'Introduction & Comments',
        anthem_title: 'Anthem',
        gallery_item_1: 'East Harbor Lighthouse / ä¸œæ¸¯ç¯å¡”'
      }
    };// initial language
let lang = 'cn';
const applyLang = (l)=>{
  lang = l;
  document.querySelectorAll('[data-i18n]').forEach(el=>{
    const key = el.getAttribute('data-i18n');
    if(i18n[l] && i18n[l][key]) el.textContent = i18n[l][key];
  });
  // gallery captions that live in attributes
  document.querySelectorAll('.gallery-item').forEach(g=>{
    const cn = g.getAttribute('data-caption-cn');
    const en = g.getAttribute('data-caption-en');
    g.querySelector('.g-caption').textContent = (lang==='cn'? (cn||en) : (en||cn));
  })
  // update anthem button label if paused
  const anthemSpan = document.querySelector('#anthemBtn span');
  if(anthemSpan){
    anthemSpan.textContent = (lang==='cn'? i18n.cn.play_anthem : i18n.en.play_anthem);
  }
}
applyLang(lang);

// language toggle
document.getElementById('langToggle').addEventListener('click',()=>{
  applyLang(lang==='cn'? 'en':'cn');
  // keep the toggle label compact
  document.getElementById('langToggle').textContent = (lang==='cn'? 'ä¸­æ–‡ / EN':'EN / ä¸­æ–‡');
});

// theme toggle (simple invert)
let dark = true;
document.getElementById('themeToggle').addEventListener('click',()=>{
  dark = !dark;
  if(!dark){
    document.documentElement.style.setProperty('--bg','#f7fafc');
    document.documentElement.style.setProperty('--text','#0b1b24');
    document.documentElement.style.setProperty('--glass','rgba(11,27,36,0.06)');
  } else {
    document.documentElement.style.setProperty('--bg','#081221');
    document.documentElement.style.setProperty('--text','#e6f0f6');
    document.documentElement.style.setProperty('--glass','rgba(255,255,255,0.06)');
  }
});

// Play anthem (improved UI feedback + aria)
const anthem = document.getElementById('anthemAudio');
const anthemBtn = document.getElementById('anthemBtn');
function setAnthemUIPlaying(playing){
  if(playing){
    anthemBtn.classList.add('pulse');
    anthemBtn.setAttribute('aria-pressed','true');
    const span = anthemBtn.querySelector('span');
    if(span) span.textContent = (lang==='cn'? i18n.cn.pause_anthem : i18n.en.pause_anthem);
  } else {
    anthemBtn.classList.remove('pulse');
    anthemBtn.setAttribute('aria-pressed','false');
    const span = anthemBtn.querySelector('span');
    if(span) span.textContent = (lang==='cn'? i18n.cn.play_anthem : i18n.en.play_anthem);
  }
}

anthemBtn.addEventListener('click',()=>{
  if(!anthem) return;
  if(anthem.paused){
    anthem.play().then(()=>{
      setAnthemUIPlaying(true);
    }).catch((err)=>{
      console.warn('play blocked', err);
      alert('æµè§ˆå™¨é˜»æ­¢è‡ªåŠ¨æ’­æ”¾ï¼Œè¯·ç‚¹å‡»é¡µé¢å†…ä»»æ„åŒºåŸŸæˆ–åœ¨é¡µé¢ä¸Šå…è®¸æ’­æ”¾ã€‚');
    });
  } else {
    anthem.pause();
    setAnthemUIPlaying(false);
  }
});
// when audio ends -> reset UI
anthem.addEventListener('ended', ()=> setAnthemUIPlaying(false));

// Join QQ group (password tooltip)
const qqLink = 'https://qm.qq.com/q/idYinBBjnq'; // provided by user
const qqPassword = 'msa'; // æç¤ºå¯†ç ï¼šé»˜çº¤ç‰¹åŒºç®€å†™
function openQq(){
  const ok = confirm('å³å°†æ‰“å¼€QQç¾¤åŠ å…¥é¡µé¢ã€‚\nåŠ å…¥å¯†ç ï¼ˆè‹¥éœ€è¦ï¼‰: ' + qqPassword + '\nç»§ç»­ï¼Ÿ');
  if(ok) window.open(qqLink,'_blank');
}
document.getElementById('joinQqBtn').addEventListener('click',openQq);
document.getElementById('joinQqSide').addEventListener('click',openQq);

// Simple lightbox for gallery (keeps original behavior)
document.getElementById('gallery').addEventListener('click', (ev)=>{
  const item = ev.target.closest('.gallery-item');
  if(!item) return;
  const src = item.querySelector('img').src;
  const caption = item.getAttribute('data-caption-' + (lang==='cn'? 'cn':'en')) || item.querySelector('.g-caption').textContent;
  openLightbox(src, caption);
});

// Add click-to-open for maps (ä¿®å¤ï¼šç‚¹å‡»åœ°å›¾æ— ååº” -> ç°åœ¨å¯ç‚¹å‡»æ”¾å¤§)
const mapsContainer = document.getElementById('mapsContainer');
if(mapsContainer){
  mapsContainer.addEventListener('click', (ev)=>{
    const mapEl = ev.target.closest('.map');
    if(!mapEl) return;
    const img = mapEl.querySelector('img');
    const captionEl = mapEl.querySelector('.caption');
    const captionText = (captionEl? captionEl.textContent : (img? img.alt : ''));
    if(img) openLightbox(img.src, captionText);
  });
}

// downloadè¡Œæ”¿æ€»è§ˆï¼ˆä¸‹è½½ç¬¬ä¸€ä¸ªåœ°å›¾æˆ–åœ¨æ–°æ ‡ç­¾é¡µæ‰“å¼€ï¼‰
const downloadBtn = document.getElementById('downloadMap');
if(downloadBtn){
  downloadBtn.addEventListener('click', (e)=>{
    e.preventDefault();
    const firstMap = document.querySelector('#mapsContainer .map img');
    if(firstMap){
      const url = firstMap.src;
      // åŠ¨æ€åˆ›å»º <a download> å°è¯•è§¦å‘ä¸‹è½½
      const a = document.createElement('a');
      a.href = url;
      const filename = url.split('/').pop().split('?')[0] || 'moxan-map.jpg';
      a.download = filename;
      document.body.appendChild(a);
      a.click();
      a.remove();
    } else {
      alert('æ‰¾ä¸åˆ°åœ°å›¾èµ„æºï¼Œè¯·æ£€æŸ¥ assets ç›®å½•ã€‚');
    }
  });
}

function openLightbox(src, caption){
  const box = document.createElement('div');
  box.style.position='fixed';box.style.inset=0;box.style.background='rgba(1,3,6,0.85)';box.style.display='grid';box.style.placeItems='center';box.style.zIndex=9999;
  box.innerHTML = `<div style="max-width:95%;max-height:95%;padding:10px"><img src="${src}" style="max-width:100%;max-height:80vh;display:block;border-radius:8px;margin-bottom:6px"/><div style="color:#ddd;text-align:center">${caption}</div></div>`;
  // ç‚¹å‡»é®ç½©å…³é—­
  box.addEventListener('click',()=>box.remove());
  // é˜²æ­¢ç‚¹å‡»å†…å±‚å…ƒç´ å†’æ³¡å¯¼è‡´ç«‹å³å…³é—­ï¼ˆå¯é€‰ï¼Œä½†ä¿ç•™åŸè¡Œä¸ºï¼‰
  // box.querySelector('div').addEventListener('click',(e)=>e.stopPropagation());
  document.body.appendChild(box);
}

// small visual flourish: parallax hero background move
const heroBg = document.getElementById('heroBg');
window.addEventListener('mousemove', (e)=>{
  const x = (e.clientX / window.innerWidth - 0.5) * 6;
  const y = (e.clientY / window.innerHeight - 0.5) * 6;
  if(heroBg) heroBg.style.transform = `translate(${x}px,${y}px) scale(1.02)`;
});

// Accessibility: keyboard control for anthem (æŒ‰ m é”® åˆ‡æ¢æ’­æ”¾)
document.addEventListener('keydown',(e)=>{ if(e.key==='m'){ if(anthem.paused) anthem.play(); else anthem.pause(); } });

// Ready: tiny entrance animations (ä¿ç•™åŸå§‹ç±»å¹¶åœ¨ load åç§»é™¤ä»¥è§¦å‘åŠ¨ç”»)
window.addEventListener('load', ()=>{ document.querySelectorAll('.float-up').forEach((el,i)=>setTimeout(()=>el.classList.remove('float-up'), 50+i*120)); });

// Helpful comment for modularization
/*
  æç¤ºï¼š
  - è¦å°†è„šæœ¬ä¸æ ·å¼æ‹†åˆ†ä¸ºå•æ–‡ä»¶ï¼š
    * styles.css -> æŠŠ <style> å†…å®¹å¤åˆ¶åˆ° styles.css
    * scripts.js -> æŠŠæ­¤ <script> å†…å®¹å¤åˆ¶åˆ° scripts.js, å¹¶åœ¨ body åº•éƒ¨é€šè¿‡ <script src="scripts.js"></script> å¼•å…¥
  - èµ„æºç›®å½•å»ºè®®ç»„ç»‡ï¼š
/assets/hero-bg.jpg
/assets/map-big.jpg
/assets/map-medium.jpg
/assets/map-city.jpg
/assets/gallery-*.jpg
/assets/momo.png
/assets/nasia.png
/assets/fille.png
/assets/boat.png
/assets/riseup.mp3
*/

  </script>
</body>
</html>
